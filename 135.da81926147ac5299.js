"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[135],{9135:(J,y,i)=>{i.r(y),i.d(y,{InputDemoModule:()=>lt});var h=i(6814),l=i(95),v=i(3557),p=i(9862),m=i(5219),t=i(4769),g=i(5905),f=i(8814),_=i(7744),Z=i(707),A=i(9552),I=i(4480),k=i(4104),S=i(2947);function L(o,c){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const d=c.$implicit;t.Q6J("value",d.organization_id),t.xp6(1),t.hij(" ",d.organization_name," ")}}function F(o,c){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const d=c.$implicit;t.Q6J("value",d.user_id),t.xp6(1),t.hij(" ",d.user_name," ")}}function $(o,c){if(1&o&&(t.TgZ(0,"option",23),t._uU(1),t.qZA()),2&o){const d=c.$implicit;t.Q6J("value",d.device_id),t.xp6(1),t.hij(" ",d.device," ")}}function B(o,c){1&o&&(t.TgZ(0,"tr")(1,"th"),t._uU(2,"Sl No"),t.qZA(),t.TgZ(3,"th"),t._uU(4,"Device Name"),t.qZA(),t.TgZ(5,"th"),t._uU(6,"User Name"),t.qZA(),t.TgZ(7,"th"),t._uU(8,"Organization Name"),t.qZA(),t.TgZ(9,"th"),t._uU(10,"IMEI No"),t.qZA(),t.TgZ(11,"th"),t._uU(12,"model "),t.qZA(),t.TgZ(13,"th"),t._uU(14,"Status "),t.qZA(),t.TgZ(15,"th",24),t._uU(16,"Edit"),t.qZA(),t.TgZ(17,"th",24),t._uU(18,"Delete"),t.qZA()())}function W(o,c){if(1&o){const d=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td"),t._uU(10),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td")(16,"button",25),t.NdJ("click",function(){const a=t.CHM(d).$implicit,r=t.oxw();return t.KtG(r.selectProduct(a))}),t.qZA()(),t.TgZ(17,"td")(18,"p-button",26),t.NdJ("click",function(){const a=t.CHM(d).$implicit,r=t.oxw();return t.KtG(r.stockDelete(a))}),t.qZA()()()}if(2&o){const d=c.rowIndex,e=c.$implicit;t.xp6(2),t.Oqu(d+1),t.xp6(2),t.Oqu(e.device),t.xp6(2),t.Oqu(e.user_name),t.xp6(2),t.Oqu(e.organization_name),t.xp6(2),t.Oqu(e.imei_no),t.xp6(2),t.Oqu(e.model),t.xp6(2),t.Oqu("Y"==e.user_active_status?"Active":"Deactive")}}function Y(o,c){1&o&&(t.TgZ(0,"div",27),t._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),t.qZA())}function E(o,c){1&o&&t._UZ(0,"div",28)}const q=function(){return{"min-width":"50rem"}};let j=(()=>{var o;class c{constructor(e,s,a,r,n,u,D){this.router=e,this.authservice=s,this.api=a,this.countryService=r,this.fb=n,this.http=u,this.messageService=D,this.filteredCountries=[],this.countries=[],this.selectedState=null,this.modelList=[],this.userList=[],this.lastAddedIndex=-1,this.stockList=[],this.spinner=!1,this.first=0,this.rows=20,this.companys=[],this.client_id=+localStorage.getItem("c_id"),this.stockIn=this.fb.group({org_id:["0",l.kI.required],device_id:["0",[l.kI.required]],device_name:["",[l.kI.required]],user_id:["0",[l.kI.required]],manage_user_device_id:[""]}),this.stockIn2=this.fb.group({org_id:["0",l.kI.required],device_id:["0",[l.kI.required]],device_name:["",[l.kI.required]],user_id:["0",[l.kI.required]],manage_user_device_id:[""]})}ngOnInit(){this.ct=this.stockIn.controls,this.getuser(),this.getDevice(),this.getDeviceData(),this.getOrganization(),this.loadPage()}getDeviceData(){}getuser(){const e=this.api.baseUrl,s=localStorage.getItem("token"),a=(new p.WM).set("Authorization",`Bearer ${s}`);this.http.post(e+"/client/manage_user/list",{client_id:this.client_id},{headers:a}).subscribe(n=>{console.log(n),this.userList=n,this.users=this.userList.data,this.users2=this.userList.data},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),console.error(n),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}onPageChange(e){this.first=e.first,this.rows=e.rows,this.goingPage=e.page+1}loadPage(){this.spinner=!0;const e=this.api.baseUrl,s=localStorage.getItem("token"),a=(new p.WM).set("Authorization",`Bearer ${s}`);this.http.post(e+"/client/manage_user/list_user_device",{client_id:this.client_id},{headers:a}).subscribe(n=>{this.spinner=!1,this.stockApi=n,this.stockListAll=this.stockApi.data})}selectProduct(e){this.users=this.users2.filter(s=>s.organization_id==e.organization_id),this.stockIn.patchValue({device_id:e.device_id,org_id:e.organization_id,user_id:e.user_id,manage_user_device_id:e.manage_user_device_id})}resetData(){this.stockIn.reset(),this.stockIn.patchValue({device_id:0,org_id:0,user_id:0})}getOrganization(){const e=this.api.baseUrl,s=localStorage.getItem("token"),a=(new p.WM).set("Authorization",`Bearer ${s}`);this.http.post(e+"/client/manage_organization/list",{client_id:this.client_id},{headers:a}).subscribe(n=>{console.log(n),this.companyList=n,this.companys=this.companyList.data},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),console.error(n)})}getDevice(){const e=this.api.baseUrl,s=localStorage.getItem("token"),a=(new p.WM).set("Authorization",`Bearer ${s}`);this.http.post(e+"/client/devices/list",{client_id:this.client_id},{headers:a}).subscribe(n=>{console.log(n),this.modelList=n,this.models=this.modelList.data},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),console.error(n)})}setUser(){this.users=[],this.users=this.users2.filter(e=>e.organization_id==this.ct.org_id.value)}getAllStock(){this.spinner=!0,this.totalPGNO=0;const e=this.api.baseUrl,s=localStorage.getItem("token"),a=(new p.WM).set("Authorization",`Bearer ${s}`);this.http.get(e+"/assign-device/list-origination",{headers:a}).subscribe(r=>{this.spinner=!1,console.log(r),this.stockApi=r,this.stockList=this.stockApi.data},r=>{"401"==r.status&&this.router.navigate(["/"]),console.log(r.status),this.spinner=!1,console.error(r)})}deviceChange(e){const s=this.models.filter(a=>a.device_id==e)[0].device;this.ct.device_name.setValue(s)}insertStockData(){this.spinner=!0;const e={client_id:this.client_id,organization_id:Number(this.ct.org_id.value),device_id:Number(this.ct.device_id.value),device:this.ct.device_name.value,user_id:Number(this.ct.user_id.value),manage_user_device_id:this.ct.manage_user_device_id.value?this.ct.manage_user_device_id.value:"",created_by:0};if(this.ct.manage_user_device_id.value){const s=this.api.baseUrl,a=localStorage.getItem("token"),r=(new p.WM).set("Authorization",`Bearer ${a}`);this.http.post(s+"/client/manage_user/edit_user_device",e,{headers:r}).subscribe(n=>{console.log(n),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Updated",life:3e3}),this.resetData(),this.loadPage()},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,console.log(n)})}else{const s=this.api.baseUrl,a=localStorage.getItem("token"),r=(new p.WM).set("Authorization",`Bearer ${a}`);this.http.post(s+"/client/manage_user/add_device",e,{headers:r}).subscribe(n=>{console.log(n),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device created",life:3e3}),this.resetData(),this.loadPage()},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,console.error(n)})}}filterCountry(e){const s=[],a=e.query;for(let r=0;r<this.models.length;r++){const n=this.models[r];0==n.model_name.toLowerCase().indexOf(a.toLowerCase())&&s.push(n)}this.filteredCountries=s}setWarranty(){this.warr_in_month=this.warr_in_month?this.warr_in_month:0;const e=new Date(this.ct.purchase_date.value);isNaN(e.getTime())?console.error("Invalid date input"):(e.setMonth(e.getMonth()+Number(this.warr_in_month)),this.stockIn.get("warranty_expired").setValue(e))}calculateOutputDate(){}selected(){console.log(this.selectedCountryAdvanced),this.modelID=this.selectedCountryAdvanced.model_id,this.product_n=this.selectedCountryAdvanced.product_name,this.company_n=this.selectedCountryAdvanced.company_name}get skillsFormArray(){return this.stockIn.get("sl_no")}addSkill(){this.skillsFormArray.push(this.fb.control(""))}removeSkill(e){this.skillsFormArray.removeAt(e)}addItem(e){13===e.keyCode&&(this.addSkill(),this.lastAddedIndex=this.skillsFormArray.length,this.lastAddedIndex=this.skillsFormArray.length-1)}formatedDate(e){const a=new Date(e),D=`${a.getFullYear()}-${String(a.getMonth()+1).padStart(2,"0")}-${String(a.getDate()).padStart(2,"0")}`;return console.log(D),D}stockDelete(e){const s={client_id:this.client_id,manage_user_device_id:e.manage_user_device_id};this.spinner=!0;const a=this.api.baseUrl,r=localStorage.getItem("token"),n=(new p.WM).set("Authorization",`Bearer ${r}`);this.http.post(a+"/client/manage_user/delete_user_device",s,{headers:n}).subscribe(u=>{console.log(u),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successful",detail:"Device Deleted",life:3e3}),this.resetData(),this.loadPage(),this.getuser()},u=>{"401"==u.status&&this.router.navigate(["/"]),console.log(u.status),this.spinner=!1,console.error(u)})}}return(o=c).\u0275fac=function(e){return new(e||o)(t.Y36(v.F0),t.Y36(g.$),t.Y36(f.s),t.Y36(_.T),t.Y36(l.qu),t.Y36(p.eN),t.Y36(m.ez))},o.\u0275cmp=t.Xpm({type:o,selectors:[["ng-component"]],features:[t._Bn([m.ez])],decls:43,vars:12,consts:[[1,"col-12"],[1,"card"],[3,"formGroup"],[1,"p-fluid","p-formgrid","grid"],[1,"field","col-12","md:col-4"],["htmlFor","firstname2"],["formControlName","org_id",2,"width","100%","height","45px","border-color","lightgray","border-radius","5px",3,"change"],["value","0","disabled","","selected",""],[3,"value",4,"ngFor","ngForOf"],["formControlName","user_id",2,"width","100%","height","45px","border-color","lightgray","border-radius","5px"],["formControlName","device_id",2,"width","100%","height","45px","border-color","lightgray","border-radius","5px",3,"change"],[1,"field","col-12","md:col-2"],["icon","pi pi-check","styleClass","p-button-primary ","label","Save",3,"click"],["icon","pi pi-refresh","styleClass","p-button-danger","label","Reset",3,"click"],[1,"col-12",2,"max-height","400px","overflow","scroll"],[3,"value","tableStyle"],["dt2",""],["pTemplate","header"],["pTemplate","body"],[1,"card","flex","justify-content-center"],[3,"first","rows","totalRecords","onPageChange"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],[3,"value"],[2,"width","5rem"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],["type","button","pRipple","","icon","pi pi-trash","styleClass","p-button-danger",3,"click"],[1,"loader"],[1,"overlay"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5"),t._uU(3,"Add/Edit User"),t.qZA(),t.TgZ(4,"form",2)(5,"div",3)(6,"div",4)(7,"label",5),t._uU(8,"Select Organization"),t.qZA(),t.TgZ(9,"select",6),t.NdJ("change",function(){return s.setUser()}),t.TgZ(10,"option",7),t._uU(11,"Select an option"),t.qZA(),t.YNc(12,L,2,2,"option",8),t.qZA()(),t.TgZ(13,"div",4)(14,"label",5),t._uU(15,"Select User"),t.qZA(),t.TgZ(16,"select",9)(17,"option",7),t._uU(18,"Select an option"),t.qZA(),t.YNc(19,F,2,2,"option",8),t.qZA()(),t.TgZ(20,"div",4)(21,"label",5),t._uU(22,"Select Device"),t.qZA(),t.TgZ(23,"select",10),t.NdJ("change",function(r){return s.deviceChange(r.target.value)}),t.TgZ(24,"option",7),t._uU(25,"Select an option"),t.qZA(),t.YNc(26,$,2,2,"option",8),t.qZA()()(),t.TgZ(27,"div",3)(28,"div",11)(29,"p-button",12),t.NdJ("click",function(){return s.insertStockData()}),t.qZA()(),t.TgZ(30,"div",11)(31,"p-button",13),t.NdJ("click",function(){return s.resetData()}),t.qZA()()()()()(),t._UZ(32,"p-toast"),t.TgZ(33,"div",14)(34,"p-table",15,16),t.YNc(36,B,19,0,"ng-template",17),t.YNc(37,W,19,7,"ng-template",18),t.qZA(),t.TgZ(38,"div",19)(39,"p-paginator",20),t.NdJ("onPageChange",function(r){return s.onPageChange(r)}),t.qZA()()(),t.YNc(40,Y,6,0,"div",21),t.YNc(41,E,1,0,"div",22),t._UZ(42,"p-toast")),2&e&&(t.xp6(4),t.Q6J("formGroup",s.stockIn),t.xp6(8),t.Q6J("ngForOf",s.companys),t.xp6(7),t.Q6J("ngForOf",s.users),t.xp6(7),t.Q6J("ngForOf",s.models),t.xp6(8),t.Q6J("value",s.stockListAll)("tableStyle",t.DdM(11,q)),t.xp6(5),t.Q6J("first",s.first)("rows",s.rows)("totalRecords",s.totalPGNO),t.xp6(1),t.Q6J("ngIf",s.spinner),t.xp6(1),t.Q6J("ngIf",s.spinner))},dependencies:[h.sg,h.O5,l._Y,l.YN,l.Kr,l.EJ,l.JJ,l.JL,l.sg,l.u,m.jx,Z.Hq,Z.zx,A.iA,I.H,k.FN,S.D],encapsulation:2}),c})(),Q=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[v.Bz.forChild([{path:"",component:j}]),v.Bz]}),c})();var C=i(7327),T=i(6760),U=i(1480),R=i(2169),x=i(3965),b=i(9663),P=i(5167),N=i(8062),z=i(4055),M=i(6218),O=i(3714),G=i(6022),H=i(6058),K=i(9540),V=i(6128),X=i(8057),w=i(5609),tt=i(1865),et=i(3749),it=i(6804),st=i(7902),nt=i(1312),ot=i(3904),rt=i(3259),at=i(7680);let lt=(()=>{var o;class c{}return(o=c).\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({providers:[m.ez,m.YP],imports:[h.ez,l.u5,l.UX,Q,at.L,C.WN,T._8,U.Gg,x.kW,b.zz,P.L$,et.e4,N.XH,z.q4,it.KZ,st.JH,M.A,tt.cc,O.j,G.Xt,R.o,H.dJ,w.Iu,K.ON,V.Qy,X.nD,Z.hJ,A.U$,I.T,nt.S,ot.D,k.EV,l.u5,l.UX,C.WN,T._8,U.Gg,x.kW,b.zz,P.L$,N.XH,z.q4,M.A,O.j,S.U,rt.z]}),c})()},7680:(J,y,i)=>{i.d(y,{L:()=>m});var h=i(1180),l=i(6814),v=i(4769);let m=(()=>{var t;class g{}return t=g,(0,h.Z)(g,"\u0275fac",function(_){return new(_||t)}),(0,h.Z)(g,"\u0275mod",v.oAB({type:t})),(0,h.Z)(g,"\u0275inj",v.cJS({imports:[l.ez]})),g})()}}]);