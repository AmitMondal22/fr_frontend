"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[731],{9731:(N,w,c)=>{c.d(w,{w:()=>at});var p=c(5219),g=c(9862),l=c(95),t=c(4769),b=c(3557),U=c(981),y=c(8814),D=c(5167),E=c(3259),O=c(5609),x=c(6814),S=c(707),I=c(3714),_=c(9552),u=c(4480),v=c(4104),h=c(1312),f=c(6340),q=c(3904),M=c(8608);function J(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.openNew())}),t.qZA()}}function L(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",15)(1,"h5",16),t._uU(2,"Manage Alerts"),t.qZA(),t.TgZ(3,"span",17),t._UZ(4,"i",18),t.TgZ(5,"input",19),t.NdJ("input",function(a){t.CHM(e),t.oxw();const o=t.MAs(5);return t.KtG(o.filterGlobal(a.target.value,"contains"))}),t.qZA()()()}}function z(s,d){1&s&&(t.TgZ(0,"tr")(1,"th",20),t._uU(2,"Organization"),t._UZ(3,"p-sortIcon",21),t.qZA(),t.TgZ(4,"th",22),t._uU(5,"Device"),t._UZ(6,"p-sortIcon",23),t.qZA(),t.TgZ(7,"th",24),t._uU(8,"Unit Name "),t._UZ(9,"p-sortIcon",25),t.qZA(),t.TgZ(10,"th",26),t._uU(11,"Alert Type "),t._UZ(12,"p-sortIcon",27),t.qZA(),t.TgZ(13,"th",28),t._uU(14,"Alert Status "),t._UZ(15,"p-sortIcon",29),t.qZA(),t.TgZ(16,"th",30),t._uU(17,"Alert Value "),t._UZ(18,"p-sortIcon",31),t.qZA(),t.TgZ(19,"th",32),t._uU(20,"Email "),t._UZ(21,"p-sortIcon",33),t.qZA(),t.TgZ(22,"th"),t._uU(23,"Edit"),t.qZA(),t.TgZ(24,"th"),t._uU(25,"Delete"),t.qZA()())}function B(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"tr")(1,"td"),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._uU(4),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"th",34),t._UZ(10,"p-badge",35),t.qZA(),t.TgZ(11,"td"),t._uU(12),t.qZA(),t.TgZ(13,"td"),t._uU(14),t.qZA(),t.TgZ(15,"td",34)(16,"button",36),t.NdJ("click",function(){const o=t.CHM(e).$implicit,n=t.oxw();return t.KtG(n.editAlert(o))}),t.qZA()(),t.TgZ(17,"td",34)(18,"button",37),t.NdJ("click",function(){const o=t.CHM(e).$implicit,n=t.oxw();return t.KtG(n.deleteAlert(o))}),t.qZA()()()}if(2&s){const e=d.$implicit;t.xp6(2),t.Oqu(e.organization_id),t.xp6(2),t.Oqu(e.device),t.xp6(2),t.Oqu(e.unit_name),t.xp6(2),t.Oqu("1CL"==e.alert_type?"Cretical Low":"2L"==e.alert_type?"Low":"3H"==e.alert_type?"High":"Cretical High"),t.xp6(2),t.Q6J("value","Y"==e.alert_status?"ON":"OFF")("severity","Y"==e.alert_status?"success":"danger"),t.xp6(2),t.Oqu(e.alert_value),t.xp6(2),t.Oqu(e.alert_email)}}function Q(s,d){if(1&s&&(t.TgZ(0,"div",15),t._uU(1),t.qZA()),2&s){const e=t.oxw();t.xp6(1),t.hij("In total there are ",e.models?e.models.length:0," Alerts.")}}function F(s,d){if(1&s&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&s){const e=d.$implicit;t.Q6J("value",e.organization_id),t.xp6(1),t.Oqu(e.organization_name)}}function Y(s,d){if(1&s&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&s){const e=d.$implicit;t.Q6J("value",e.unit_id),t.xp6(1),t.Oqu(e.unit_name)}}function K(s,d){if(1&s&&(t.TgZ(0,"option",53),t._uU(1),t.qZA()),2&s){const e=d.$implicit;t.Q6J("value",e.device_id),t.xp6(1),t.Oqu(e.device)}}const A=function(){return{standalone:!0}};function R(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",54)(1,"div",55)(2,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.low=a)}),t.qZA(),t.TgZ(3,"h5",57),t._uU(4,"Low"),t.qZA()(),t._UZ(5,"br"),t.TgZ(6,"div",55)(7,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.high=a)}),t.qZA(),t.TgZ(8,"h5",57),t._uU(9,"High"),t.qZA()(),t._UZ(10,"br"),t.TgZ(11,"div",55)(12,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.c_low=a)}),t.qZA(),t.TgZ(13,"h5",57),t._uU(14,"Critical Low"),t.qZA()(),t._UZ(15,"br"),t.TgZ(16,"div",55)(17,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.c_high=a)}),t.qZA(),t.TgZ(18,"h5",57),t._uU(19,"Critical High"),t.qZA()()()}if(2&s){const e=t.oxw(2);t.xp6(1),t.Q6J("hidden",!e.low2),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(12,A))("ngModel",e.low),t.xp6(4),t.Q6J("hidden",!e.high2),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(13,A))("ngModel",e.high),t.xp6(4),t.Q6J("hidden",!e.c_low2),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(14,A))("ngModel",e.c_low),t.xp6(4),t.Q6J("hidden",!e.c_high2),t.xp6(1),t.Q6J("ngModelOptions",t.DdM(15,A))("ngModel",e.c_high)}}function H(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"div",54)(1,"div",58)(2,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.low=a)}),t.qZA(),t.TgZ(3,"h5",57),t._uU(4,"Low"),t.qZA()(),t._UZ(5,"br"),t.TgZ(6,"div",58)(7,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.high=a)}),t.qZA(),t.TgZ(8,"h5",57),t._uU(9,"High"),t.qZA()(),t._UZ(10,"br"),t.TgZ(11,"div",58)(12,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.c_low=a)}),t.qZA(),t.TgZ(13,"h5",57),t._uU(14,"Critical Low"),t.qZA()(),t._UZ(15,"br"),t.TgZ(16,"div",58)(17,"p-inputSwitch",56),t.NdJ("ngModelChange",function(a){t.CHM(e);const o=t.oxw(2);return t.KtG(o.c_high=a)}),t.qZA(),t.TgZ(18,"h5",57),t._uU(19,"Critical High"),t.qZA()()()}if(2&s){const e=t.oxw(2);t.xp6(2),t.Q6J("ngModelOptions",t.DdM(8,A))("ngModel",e.low),t.xp6(5),t.Q6J("ngModelOptions",t.DdM(9,A))("ngModel",e.high),t.xp6(5),t.Q6J("ngModelOptions",t.DdM(10,A))("ngModel",e.c_low),t.xp6(5),t.Q6J("ngModelOptions",t.DdM(11,A))("ngModel",e.c_high)}}function k(s,d){1&s&&(t.TgZ(0,"div",59)(1,"label",45),t._uU(2,"Low"),t.qZA(),t._UZ(3,"p-inputNumber",60),t.qZA()),2&s&&(t.xp6(3),t.Q6J("minFractionDigits",2))}function W(s,d){1&s&&(t.TgZ(0,"div",59)(1,"label",45),t._uU(2,"High"),t.qZA(),t._UZ(3,"p-inputNumber",61),t.qZA()),2&s&&(t.xp6(3),t.Q6J("minFractionDigits",2))}function V(s,d){1&s&&(t.TgZ(0,"div",59)(1,"label",45),t._uU(2,"Critical High"),t.qZA(),t._UZ(3,"p-inputNumber",62),t.qZA()),2&s&&(t.xp6(3),t.Q6J("minFractionDigits",2))}function G(s,d){1&s&&(t.TgZ(0,"div",59)(1,"label",45),t._uU(2,"Critical low"),t.qZA(),t._UZ(3,"p-inputNumber",63),t.qZA()),2&s&&(t.xp6(3),t.Q6J("minFractionDigits",2))}function $(s,d){if(1&s&&(t.TgZ(0,"from",38)(1,"div",39)(2,"label",40),t._uU(3,"Select Organization"),t.TgZ(4,"span",41),t._uU(5,"*"),t.qZA()(),t.TgZ(6,"select",42)(7,"option",43),t._uU(8,"Select an Organization"),t.qZA(),t.YNc(9,F,2,2,"option",44),t.qZA()(),t.TgZ(10,"div",39)(11,"label",45),t._uU(12,"Unit"),t.TgZ(13,"span",41),t._uU(14,"*"),t.qZA()(),t.TgZ(15,"select",46)(16,"option",47),t._uU(17,"Select a Unit"),t.qZA(),t.YNc(18,Y,2,2,"option",44),t.qZA()(),t.TgZ(19,"div",39)(20,"label",40),t._uU(21,"Select Device"),t.TgZ(22,"span",41),t._uU(23,"*"),t.qZA()(),t.TgZ(24,"select",48)(25,"option",47),t._uU(26,"Select a Device"),t.qZA(),t.YNc(27,K,2,2,"option",44),t.qZA()(),t.TgZ(28,"div",39)(29,"label",45),t._uU(30,"Email"),t.TgZ(31,"span",41),t._uU(32,"*"),t.qZA()(),t._UZ(33,"input",49),t.qZA(),t.TgZ(34,"div",39)(35,"label",45),t._uU(36,"Alert Type"),t.qZA(),t.YNc(37,R,20,16,"div",50),t.YNc(38,H,20,12,"div",50),t.TgZ(39,"div",51),t.YNc(40,k,4,1,"div",52),t.YNc(41,W,4,1,"div",52),t.qZA(),t.TgZ(42,"div",51),t.YNc(43,V,4,1,"div",52),t.YNc(44,G,4,1,"div",52),t.qZA()()()),2&s){const e=t.oxw();t.Q6J("formGroup",e.unitForm),t.xp6(7),t.Q6J("value",0),t.xp6(2),t.Q6J("ngForOf",e.products),t.xp6(9),t.Q6J("ngForOf",e.unitList),t.xp6(9),t.Q6J("ngForOf",e.cities),t.xp6(10),t.Q6J("ngIf",e.editMode),t.xp6(1),t.Q6J("ngIf",!e.editMode),t.xp6(2),t.Q6J("ngIf",e.low),t.xp6(1),t.Q6J("ngIf",e.high),t.xp6(2),t.Q6J("ngIf",e.c_high),t.xp6(1),t.Q6J("ngIf",e.c_low)}}function j(s,d){if(1&s){const e=t.EpF();t.TgZ(0,"button",64),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.hideDialog())}),t.qZA(),t.TgZ(1,"button",65),t.NdJ("click",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.saveProduct())}),t.qZA()}}function X(s,d){1&s&&(t.TgZ(0,"div",66),t._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),t.qZA())}function tt(s,d){1&s&&t._UZ(0,"div",67)}const et=function(){return["organization_id","device","unit_name","alert_type","alert_status"]},it=function(){return{"min-width":"75rem"}},lt=function(){return{width:"600px",height:"750px"}},nt=function(){return{width:"450px"}};let at=(()=>{var s;class d{constructor(i,a,o,n,r,m,Z){this.router=i,this.formBuilder=a,this.http=o,this.productService=n,this.messageService=r,this.confirmationService=m,this.api=Z,this.productDialog=!1,this.credentials=[],this.submitted=!1,this.companyList=[],this.unitList=[],this.productList=[],this.modelList=[],this.client_id=+localStorage.getItem("c_id"),this.value="",this.editMode=!1,this.low=!1,this.high=!1,this.c_low=!1,this.c_high=!1,this.low2=!0,this.high2=!0,this.c_low2=!0,this.c_high2=!0,this.value3=15,this.cities=[],this.spinner=!1,this.cities2=[{unit_name:"voltage",unit:"volt"},{unit_name:"current",unit:"ampere"},{unit_name:"resistance",unit:"ohm"},{unit_name:"power",unit:"watt"},{unit_name:"capacitance",unit:"farad"},{unit_name:"inductance",unit:"henry"},{unit_name:"frequency",unit:"hertz"},{unit_name:"impedance",unit:"ohm"}],this.cities3=[{name:"high"},{name:"low"},{name:"critical heigh"},{name:"critical low"},{name:"Emergency"}],this.unitForm=this.formBuilder.group({alert_id:[""],organization_id:["0",l.kI.required],device_id:["0",l.kI.required],device:[""],unit_id:["0",l.kI.required],low_val:[""],high_val:[""],c_high_val:[""],c_low_val:[""],email:["",l.kI.required]})}ngOnInit(){this.ct=this.unitForm.controls,this.getOrganization(),this.getDevice(),this.getUnit(),this.getAlertList(),this.unitForm.patchValue({organization_id:0,device_id:0,unit_id:0})}abc(){}getUnit(){const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`);this.spinner=!0,this.http.post(i+"/client/unit/list",{headers:o}).subscribe(n=>{this.spinner=!1,console.log(n),this.units=n,this.unitList=this.units.data},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,console.error(n)})}getOrganization(){const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`),n={client_id:this.client_id};this.spinner=!0,this.http.post(i+"/client/manage_organization/list",n,{headers:o}).subscribe(r=>{this.spinner=!1,console.log(r),this.data1=r,this.products=this.data1.data},r=>{"401"==r.status&&this.router.navigate(["/"]),console.log(r.status),this.spinner=!1,console.error(r)})}getAlertList(){const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`),n={client_id:this.client_id};this.spinner=!0,this.http.post(i+"/client/alert/list",n,{headers:o}).subscribe(r=>{this.spinner=!1,console.log(r),this.modelList=r,this.models=this.modelList.data,this.models.forEach(m=>{m.organization_id=this.products.filter(Z=>Z.organization_id==m.organization_id)[0].organization_name})},r=>{"401"==r.status&&this.router.navigate(["/"]),console.log(r.status),this.spinner=!1,console.error(r),this.messageService.add({severity:"error",summary:"Error",detail:"From Server Side!!",life:3e3})})}getDeviceCompany(){const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`);this.spinner=!0,this.http.get(i+"/master/list-origination",{headers:o}).subscribe(n=>{this.spinner=!1,console.log(n),this.companyList=n,this.companys=this.companyList.data},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,console.error(n)})}openNew(){this.editMode=!1,this.unitForm.reset(),this.product={},this.submitted=!1,this.productDialog=!0,this.low=!1,this.c_low=!1,this.high=!1,this.c_high=!1,this.unitForm.patchValue({organization_id:0,device_id:0,unit_id:0})}deleteSelectedProducts(){this.confirmationService.confirm({message:"Are you sure you want to delete the selected products?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.products=this.products.filter(i=>!this.selectedProducts?.includes(i)),this.selectedProducts=null,this.messageService.add({severity:"success",summary:"Successful",detail:"User Deleted",life:3e3})}})}changePass(){this.editMode=!1}editAlert(i){this.editedalert=i.alert_type,this.editMode=!0,"1CL"==i.alert_type&&(this.ct.c_low_val.setValue(i.alert_value),this.ct.low_val.setValue(0),this.ct.high_val.setValue(0),this.ct.c_high_val.setValue(0),this.c_low=!0,this.low=!1,this.high=!1,this.c_high=!1,this.c_low2=!1,this.low2=!0,this.high2=!0,this.c_high2=!0),"2L"==i.alert_type&&(this.ct.low_val.setValue(i.alert_value),this.ct.c_low_val.setValue(0),this.ct.high_val.setValue(0),this.ct.c_high_val.setValue(0),this.low=!0,this.c_low=!1,this.high=!1,this.c_high=!1,this.low2=!1,this.c_low2=!0,this.high2=!0,this.c_high2=!0),"3H"==i.alert_type&&(this.ct.high_val.setValue(i.alert_value),this.ct.c_low_val.setValue(0),this.ct.low_val.setValue(0),this.ct.c_high_val.setValue(0),this.high=!0,this.low=!1,this.c_low=!1,this.c_high=!1,this.high2=!1,this.low2=!0,this.c_low2=!0,this.c_high2=!0),"4CH"==i.alert_type&&(this.ct.c_high_val.setValue(i.alert_value),this.ct.c_low_val.setValue(0),this.ct.low_val.setValue(0),this.ct.high_val.setValue(0),this.c_high=!0,this.low=!1,this.c_low=!1,this.high=!1,this.c_high2=!1,this.low2=!0,this.c_low2=!0,this.high2=!0),this.productDialog=!0,this.unitForm.patchValue({alert_id:i.alert_id,organization_id:i.organization_id,device_id:i.device_id,unit_id:i.unit_id,email:i.alert_email})}deleteAlert(i){this.confirmationService.confirm({message:"Are you sure you want to delete "+i.device+"?",header:"Confirm",icon:"pi pi-exclamation-triangle",accept:()=>{this.DeleteAlert(i)}})}hideDialog(){this.credentials=[],this.productDialog=!1}saveProduct(){this.spinner=!0,this.low&&(this.credentials1={alert_id:this.ct.alert_id.value,client_id:this.client_id,organization_id:this.ct.organization_id.value,device_id:this.ct.device_id.value,device:this.cities.filter(n=>n.device_id==this.ct.device_id.value)[0].device,unit_id:this.ct.unit_id.value,alert_type:"2L",alert_status:"Y",alert_value:this.ct.low_val.value,alert_email:this.ct.email.value,create_by:Number(localStorage.getItem("user_id"))},this.credentials.push(this.credentials1)),this.c_low&&(this.credentials2={alert_id:this.ct.alert_id.value,client_id:this.client_id,organization_id:this.ct.organization_id.value,device_id:this.ct.device_id.value,device:this.cities.filter(n=>n.device_id==this.ct.device_id.value)[0].device,unit_id:this.ct.unit_id.value,alert_type:"1CL",alert_status:"Y",alert_value:this.ct.c_low_val.value,alert_email:this.ct.email.value,create_by:Number(localStorage.getItem("user_id"))},this.credentials.push(this.credentials2)),this.high&&(this.credentials3={alert_id:this.ct.alert_id.value,client_id:this.client_id,organization_id:this.ct.organization_id.value,device_id:this.ct.device_id.value,device:this.cities.filter(n=>n.device_id==this.ct.device_id.value)[0].device,unit_id:this.ct.unit_id.value,alert_type:"3H",alert_status:"Y",alert_value:this.ct.high_val.value,alert_email:this.ct.email.value,create_by:Number(localStorage.getItem("user_id"))},this.credentials.push(this.credentials3)),this.c_high?(this.credentials4={alert_id:this.ct.alert_id.value,client_id:this.client_id,organization_id:this.ct.organization_id.value,device_id:this.ct.device_id.value,device:this.cities.filter(n=>n.device_id==this.ct.device_id.value)[0].device,unit_id:this.ct.unit_id.value,alert_type:"4CH",alert_status:"Y",alert_value:this.ct.c_high_val.value,alert_email:this.ct.email.value,create_by:Number(localStorage.getItem("user_id"))},this.credentials.push(this.credentials4)):this.credentials5={alert_id:this.ct.alert_id.value,client_id:this.client_id,organization_id:this.ct.organization_id.value,device_id:this.ct.device_id.value,device:this.cities.filter(n=>n.device_id==this.ct.device_id.value)[0].device,unit_id:this.ct.unit_id.value,alert_type:this.editedalert,alert_status:"N",alert_value:0,alert_email:this.ct.email.value,create_by:Number(localStorage.getItem("user_id"))};const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`);this.unitForm.invalid?this.messageService.add({severity:"error",summary:"Error",detail:"Please fill all the required field!",life:3e3}):this.ct.alert_id.value?this.http.post(i+"/client/alert/edit",this.low?this.credentials1:this.c_low?this.credentials2:this.high?this.credentials3:this.c_high?this.credentials4:this.credentials5,{headers:o}).subscribe(n=>{this.spinner=!1,console.log(n),this.messageService.add({severity:"success",summary:"Successful",detail:"Alert Updated",life:3e3}),this.getAlertList(),this.hideDialog()},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}),console.error(n)}):this.http.post(i+"/client/alert/add",this.credentials,{headers:o}).subscribe(n=>{this.spinner=!1,console.log(n),this.messageService.add({severity:"success",summary:"Successful",detail:"Alert Created",life:3e3}),this.getAlertList(),this.hideDialog()},n=>{"401"==n.status&&this.router.navigate(["/"]),console.log(n.status),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}),console.error(n)})}findIndexById(i){let a=-1;for(let o=0;o<this.products.length;o++)if(this.products[o].origination_id===i){a=o;break}return a}updateCompany(i,a,o,n,r){const m={origination_id:i,user_id:a,name:o,email:n,password:r},Z=this.api.baseUrl,P=localStorage.getItem("token"),T=(new g.WM).set("Authorization",`Bearer ${P}`);this.spinner=!0,this.http.post(Z+"/master/edit-user",m,{headers:T}).subscribe(C=>{this.spinner=!1,console.log(C),this.messageService.add({severity:"success",summary:"Successful",detail:"User Updated",life:3e3}),this.getAlertList()},C=>{"401"==C.status&&this.router.navigate(["/"]),console.log(C.status),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}),console.error(C)})}AddCompany(i,a,o,n){const r={origination_id:i,name:a,email:o,password:n},m=this.api.baseUrl,Z=localStorage.getItem("token"),P=(new g.WM).set("Authorization",`Bearer ${Z}`);this.spinner=!0,this.http.post(m+"/master/add-user",r,{headers:P}).subscribe(T=>{this.spinner=!1,console.log(T),this.messageService.add({severity:"success",summary:"Successful",detail:"User Created",life:3e3}),this.getAlertList()},T=>{"401"==T.status&&this.router.navigate(["/"]),console.log(T.status),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}),console.error(T)})}DeleteAlert(i){const a={alert_id:i.alert_id,client_id:this.client_id,organization_id:i.organization_id,device_id:i.device_id},o=this.api.baseUrl,n=localStorage.getItem("token"),r=(new g.WM).set("Authorization",`Bearer ${n}`);this.spinner=!0,this.http.post(o+"/client/alert/delete",a,{headers:r}).subscribe(m=>{this.spinner=!1,console.log(m),this.messageService.add({severity:"success",summary:"Successful",detail:"Alert Deleted",life:3e3}),this.getAlertList(),this.hideDialog()},m=>{"401"==m.status&&this.router.navigate(["/"]),console.log(m.status),this.spinner=!1,this.messageService.add({severity:"error",summary:"Error",detail:"Data Related Issue!!",life:3e3}),console.error(m)})}getDevice(){const i=this.api.baseUrl,a=localStorage.getItem("token"),o=(new g.WM).set("Authorization",`Bearer ${a}`),n={client_id:this.client_id};this.spinner=!0,this.http.post(i+"/client/devices/list",n,{headers:o}).subscribe(r=>{this.spinner=!1,console.log(r,"ppp"),this.data1=r,this.cities=this.data1.data},r=>{"401"==r.status&&this.router.navigate(["/"]),console.log(r.status),this.spinner=!1,console.error(r)})}}return(s=d).\u0275fac=function(i){return new(i||s)(t.Y36(b.F0),t.Y36(l.qu),t.Y36(g.eN),t.Y36(U.M),t.Y36(p.ez),t.Y36(p.YP),t.Y36(y.s))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-alert"]],features:[t._Bn([p.ez,p.YP])],decls:16,vars:20,consts:[[1,"card"],["styleClass","mb-4 gap-2"],["pTemplate","left"],["dataKey","device","currentPageReportTemplate","Showing {first} to {last} of {totalRecords} entries",3,"value","rows","paginator","globalFilterFields","tableStyle","selection","rowHover","showCurrentPageReport","selectionChange"],["dt",""],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","summary"],["header","Alert Details","styleClass","p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],["pButton","","pRipple","","label","Create new alert","icon","pi pi-plus",1,"p-button-primary","mr-2",3,"click"],[1,"flex","align-items-center","justify-content-between"],[1,"m-0"],[1,"p-input-icon-left"],[1,"pi","pi-search"],["pInputText","","type","text","placeholder","Search...",3,"input"],["pSortableColumn","organization_id"],["field","organization_id"],["pSortableColumn","device"],["field","device"],["pSortableColumn","unit_name"],["field","unit_name"],["pSortableColumn","alert_type"],["field","alert_type"],["pSortableColumn","alert_status"],["field","alert_status"],["pSortableColumn","alert_value"],["field","alert_value"],["pSortableColumn","alert_email"],["field","alert_email"],[2,"text-align","center"],[3,"value","severity"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],["type","button","pButton","","pRipple","","icon","pi pi-trash",1,"p-button-danger",3,"click"],[3,"formGroup"],[1,"field"],["for","company"],[2,"color","red"],["formControlName","organization_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],["selected","","disabled","",3,"value"],[3,"value",4,"ngFor","ngForOf"],["for","product"],["formControlName","unit_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],["selected","","disabled","","value","0"],["formControlName","device_id",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px"],["type","text","pInputText","","id","email","placeholder","Enter a mail id","formControlName","email","required",""],["class","flex flex-column md:flex-row gap-3",4,"ngIf"],[1,"flex","flex-column","md:flex-row","gap-1"],["class","col-6 lg:col-6 xl:col-6",4,"ngIf"],[3,"value"],[1,"flex","flex-column","md:flex-row","gap-3"],[2,"display","flex",3,"hidden"],[3,"ngModelOptions","ngModel","ngModelChange"],[2,"padding","3px","margin","0px","font-size","14px"],[2,"display","flex"],[1,"col-6","lg:col-6","xl:col-6"],["placeholder","Enter Low Value","formControlName","low_val","pTooltip","Below this value Alert will generated","required","",3,"minFractionDigits"],["placeholder","Enter High Value","formControlName","high_val","pTooltip","Below this value Alert will generated","required","",3,"minFractionDigits"],["placeholder","Enter Critical High Value","formControlName","c_high_val","pTooltip","Below this value Alert will generated","required","",3,"minFractionDigits"],["placeholder","Enter Critical low Value","formControlName","c_low_val","pTooltip","Below this value Alert will generated","required","",3,"minFractionDigits"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"click"],[1,"loader"],[1,"overlay"]],template:function(i,a){1&i&&(t.TgZ(0,"div",0),t._UZ(1,"p-toast"),t.TgZ(2,"p-toolbar",1),t.YNc(3,J,1,0,"ng-template",2),t.qZA(),t.TgZ(4,"p-table",3,4),t.NdJ("selectionChange",function(n){return a.selectedProducts=n}),t.YNc(6,L,6,0,"ng-template",5),t.YNc(7,z,26,0,"ng-template",6),t.YNc(8,B,19,8,"ng-template",7),t.YNc(9,Q,2,1,"ng-template",8),t.qZA()(),t.TgZ(10,"p-dialog",9),t.NdJ("visibleChange",function(n){return a.productDialog=n}),t.YNc(11,$,45,11,"ng-template",10),t.YNc(12,j,2,0,"ng-template",11),t.qZA(),t._UZ(13,"p-confirmDialog"),t.YNc(14,X,6,0,"div",12),t.YNc(15,tt,1,0,"div",13)),2&i&&(t.xp6(4),t.Q6J("value",a.models)("rows",4)("paginator",!0)("globalFilterFields",t.DdM(16,et))("tableStyle",t.DdM(17,it))("selection",a.selectedProducts)("rowHover",!0)("showCurrentPageReport",!0),t.xp6(6),t.Akn(t.DdM(18,lt)),t.Q6J("visible",a.productDialog)("modal",!0),t.xp6(3),t.Akn(t.DdM(19,nt)),t.xp6(1),t.Q6J("ngIf",a.spinner),t.xp6(1),t.Q6J("ngIf",a.spinner))},dependencies:[D.Rn,p.jx,E.u,O.Ql,x.sg,x.O5,S.Hq,I.o,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.JL,l.Q7,l.On,_.iA,_.lQ,_.fz,u.H,v.FN,h.V,f.o,q.Q,M.Ct,l.sg,l.u],encapsulation:2}),d})()},6340:(N,w,c)=>{c.d(w,{V:()=>I,o:()=>S});var p=c(1180),g=c(6814),l=c(4769),t=c(5219);function b(_,u){1&_&&l.GkF(0)}function U(_,u){if(1&_&&(l.TgZ(0,"div",4),l.YNc(1,b,1,0,"ng-container",5),l.qZA()),2&_){const v=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",v.startTemplate)}}function y(_,u){1&_&&l.GkF(0)}function D(_,u){if(1&_&&(l.TgZ(0,"div",6),l.YNc(1,y,1,0,"ng-container",5),l.qZA()),2&_){const v=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",v.centerTemplate)}}function E(_,u){1&_&&l.GkF(0)}function O(_,u){if(1&_&&(l.TgZ(0,"div",7),l.YNc(1,E,1,0,"ng-container",5),l.qZA()),2&_){const v=l.oxw();l.xp6(1),l.Q6J("ngTemplateOutlet",v.endTemplate)}}const x=["*"];let S=(()=>{var _;class u{constructor(h){(0,p.Z)(this,"el",void 0),(0,p.Z)(this,"style",void 0),(0,p.Z)(this,"styleClass",void 0),(0,p.Z)(this,"templates",void 0),(0,p.Z)(this,"startTemplate",void 0),(0,p.Z)(this,"endTemplate",void 0),(0,p.Z)(this,"centerTemplate",void 0),this.el=h}getBlockableElement(){return this.el.nativeElement.children[0]}ngAfterContentInit(){this.templates.forEach(h=>{switch(h.getType()){case"left":this.startTemplate=h.template;break;case"right":this.endTemplate=h.template;break;case"center":this.centerTemplate=h.template}})}}return _=u,(0,p.Z)(u,"\u0275fac",function(h){return new(h||_)(l.Y36(l.SBq))}),(0,p.Z)(u,"\u0275cmp",l.Xpm({type:_,selectors:[["p-toolbar"]],contentQueries:function(h,f,q){if(1&h&&l.Suo(q,t.jx,4),2&h){let M;l.iGM(M=l.CRH())&&(f.templates=M)}},hostAttrs:[1,"p-element"],inputs:{style:"style",styleClass:"styleClass"},ngContentSelectors:x,decls:5,vars:7,consts:[["role","toolbar",3,"ngClass","ngStyle"],["class","p-toolbar-group-left p-toolbar-group-start",4,"ngIf"],["class","p-toolbar-group-center",4,"ngIf"],["class","p-toolbar-group-right p-toolbar-group-end",4,"ngIf"],[1,"p-toolbar-group-left","p-toolbar-group-start"],[4,"ngTemplateOutlet"],[1,"p-toolbar-group-center"],[1,"p-toolbar-group-right","p-toolbar-group-end"]],template:function(h,f){1&h&&(l.F$t(),l.TgZ(0,"div",0),l.Hsn(1),l.YNc(2,U,2,1,"div",1),l.YNc(3,D,2,1,"div",2),l.YNc(4,O,2,1,"div",3),l.qZA()),2&h&&(l.Tol(f.styleClass),l.Q6J("ngClass","p-toolbar p-component")("ngStyle",f.style),l.xp6(2),l.Q6J("ngIf",f.startTemplate),l.xp6(1),l.Q6J("ngIf",f.centerTemplate),l.xp6(1),l.Q6J("ngIf",f.endTemplate))},dependencies:[g.mk,g.O5,g.tP,g.PC],styles:[".p-toolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap}.p-toolbar-group-start,.p-toolbar-group-center,.p-toolbar-group-end,.p-toolbar-group-left,.p-toolbar-group-right{display:flex;align-items:center}\n"],encapsulation:2,changeDetection:0})),u})(),I=(()=>{var _;class u{}return _=u,(0,p.Z)(u,"\u0275fac",function(h){return new(h||_)}),(0,p.Z)(u,"\u0275mod",l.oAB({type:_})),(0,p.Z)(u,"\u0275inj",l.cJS({imports:[g.ez]})),u})()}}]);