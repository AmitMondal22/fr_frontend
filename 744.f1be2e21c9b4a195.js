"use strict";(self.webpackChunksakai_ng=self.webpackChunksakai_ng||[]).push([[744],{744:(b,y,a)=>{a.r(y),a.d(y,{TimelineDemoModule:()=>K});var p=a(6814),x=a(3557),_=a(9862),m=a(5219),e=a(4769),f=a(8814),u=a(981),g=a(707),h=a(9552),T=a(1312);function Z(t,n){1&t&&(e.TgZ(0,"tr",23)(1,"td",24)(2,"strong"),e._uU(3,"Product"),e.qZA()(),e.TgZ(4,"td",25)(5,"strong"),e._uU(6,"Serial No"),e.qZA()(),e.TgZ(7,"td",26)(8,"strong"),e._uU(9,"Company"),e.qZA()(),e.TgZ(10,"td",26)(11,"strong"),e._uU(12,"Model"),e.qZA()(),e.TgZ(13,"td",26)(14,"strong"),e._uU(15,"Warranty upto"),e.qZA()(),e.TgZ(16,"td",27)(17,"strong"),e._uU(18,"Price"),e.qZA()(),e.TgZ(19,"td",28)(20,"strong"),e._uU(21,"Edit Product"),e.qZA()()())}function D(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr")(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",31),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",32)(15,"button",33),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,o=e.oxw();return e.KtG(o.editBill(r))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function P(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"tr",34)(1,"td",25),e._uU(2),e.qZA(),e.TgZ(3,"td",25),e._uU(4),e.qZA(),e.TgZ(5,"td",26),e._uU(6),e.qZA(),e.TgZ(7,"td",26),e._uU(8),e.qZA(),e.TgZ(9,"td",26),e._uU(10),e.qZA(),e.TgZ(11,"td",31),e._uU(12),e.ALo(13,"currency"),e.qZA(),e.TgZ(14,"td",32)(15,"button",33),e.NdJ("click",function(){e.CHM(i);const r=e.oxw().$implicit,o=e.oxw();return e.KtG(o.editBill(r))}),e.qZA()()()}if(2&t){const i=e.oxw().$implicit;e.xp6(2),e.Oqu(i.product_name),e.xp6(2),e.Oqu(i.serial_number),e.xp6(2),e.Oqu(i.company_name),e.xp6(2),e.Oqu(i.model_name),e.xp6(2),e.Oqu(i.sels_warranty),e.xp6(2),e.Oqu(e.xi3(13,6,i.price,"INR"))}}function k(t,n){if(1&t&&(e.YNc(0,D,16,9,"tr",29),e.YNc(1,P,16,9,"tr",30)),2&t){const i=n.$implicit;e.Q6J("ngIf",null==i.exchange_product_id),e.xp6(1),e.Q6J("ngIf",i.exchange_product_id>0)}}function A(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"div",35)(1,"label",36),e._uU(2,"scan BarCode"),e.qZA(),e.TgZ(3,"input",37),e.NdJ("ngModelChange",function(r){e.CHM(i);const o=e.oxw();return e.KtG(o.newProduct=r)})("keyup",function(r){e.CHM(i);const o=e.oxw();return e.KtG(o.searchProduct(r))}),e.qZA()()}if(2&t){const i=e.oxw();e.xp6(3),e.Q6J("ngModel",i.newProduct)}}function M(t,n){if(1&t){const i=e.EpF();e.TgZ(0,"button",38),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.hideDialog())}),e.qZA(),e.TgZ(1,"button",39),e.NdJ("click",function(){e.CHM(i);const r=e.oxw();return e.KtG(r.saveProduct())}),e.qZA()}if(2&t){const i=e.oxw();e.xp6(1),e.Q6J("disabled",!i.stockList.length>0)}}function S(t,n){1&t&&(e.TgZ(0,"div",40),e._UZ(1,"div")(2,"div")(3,"div")(4,"div")(5,"div"),e.qZA())}function U(t,n){1&t&&e._UZ(0,"div",41)}const I=function(){return{width:"550px"}};let O=(()=>{var t;class n{constructor(l,r,o,s,c,d){this.router=l,this.http=r,this.messageService=o,this.confirmationService=s,this.api=c,this.bill=d,this.ListData=[],this.spinner=!1,this.tot_price=0,this.Due=!1,this.productDialog=!1,this.submitted=!1,this.stockList=[],this.id=this.bill.billing_id}ngOnInit(){this.getBill(this.id)}hideDialog(){this.productDialog=!1,this.submitted=!1}getBill(l){this.spinner=!0;const r={billing_id:l},o=this.api.baseUrl,s=localStorage.getItem("token"),c=(new _.WM).set("Authorization",`Bearer ${s}`);this.http.post(o+"/billing/data",r,{headers:c}).subscribe(d=>{console.log(d),d&&(this.spinner=!1,this.data=d,this.CustomerDtls=this.data.customer,this.ListData=this.data.list,"P"==this.ListData[0].payment_flag?(this.Paid=!0,this.Due=!1):(this.Due=!0,this.Paid=!1),this.ListData.length>0&&this.ListData.forEach(G=>{this.tot_price+=Number(G.price)}))},d=>{"401"==d.status&&this.router.navigate(["/"]),console.log(d.status),this.spinner=!1,console.error(d)})}searchProduct(l){if(13===l.keyCode){this.spinner=!0;const r=this.api.baseUrl,o=localStorage.getItem("token"),s=(new _.WM).set("Authorization",`Bearer ${o}`);this.http.get(r+"/stock/stock_product?page=1&search="+l.target.value.toString(),{headers:s}).subscribe(c=>{this.spinner=!1,this.stockApi=c,this.stockListAll=this.stockApi.data,this.stockList=this.stockListAll.data,this.stockList.length>0||this.messageService.add({severity:"error",summary:"Error",detail:"Product dose not match with Stock item",life:3e3})})}}saveProduct(){this.submitted=!0;const l={cust_id:this.replaceProduct.cust_id,bill_id:this.replaceProduct.billing_id,product_barcode:this.replaceProduct.serial_number,new_barcode:this.stockList[0].serial_number};this.spinner=!0;const r=this.api.baseUrl,o=localStorage.getItem("token"),s=(new _.WM).set("Authorization",`Bearer ${o}`);this.http.post(r+"/billing/add_werent_product",l,{headers:s}).subscribe(c=>{console.log(c),this.spinner=!1,this.messageService.add({severity:"success",summary:"Successfully",detail:"Changed Product",life:3e3}),this.hideDialog()},c=>{"401"==c.status&&this.router.navigate(["/"]),console.log(c.status),this.spinner=!1,console.error(c),this.hideDialog(),this.messageService.add({severity:"error",summary:"Error",detail:"While Changing Product",life:3e3})})}editBill(l){this.replaceProduct=null,this.replaceProduct=l,this.productDialog=!0}callPrint(l){const r=document.getElementById(l).innerHTML,o=document.body.innerHTML;document.body.innerHTML=r,window.print(),document.body.innerHTML=o}}return(t=n).\u0275fac=function(l){return new(l||t)(e.Y36(x.F0),e.Y36(_.eN),e.Y36(m.ez),e.Y36(m.YP),e.Y36(f.s),e.Y36(u.M))},t.\u0275cmp=e.Xpm({type:t,selectors:[["ng-component"]],features:[e._Bn([m.ez])],decls:52,vars:13,consts:[[1,"grid"],[1,"col-12"],["id","bill",1,"card"],[1,"container"],[1,"row"],[1,"col-xs-12"],[1,"invoice-title",2,"margin-left","4%"],[1,"row",2,"margin-left","4%"],[1,"col-xs-6"],[1,"col-xs-6","text-right",2,"padding-right","2%"],[1,"field","col-12","md:col-12"],[1,"panel","panel-default"],[1,"panel-heading"],[1,"card","flex","justify-content-center"],[3,"value"],["dt2",""],["pTemplate","header"],["pTemplate","body"],["header","Deposit amount into the customer account",1,"p-fluid",3,"visible","modal","visibleChange"],["pTemplate","content"],["pTemplate","footer"],["class","loader",4,"ngIf"],["class","overlay",4,"ngIf"],[2,"background-color","beige"],[1,"text-left",2,"padding-left","2%"],[1,"text-left"],[1,"text-center"],[1,"text-right",2,"padding-right","2%"],[2,"width","7rem"],[4,"ngIf"],["style","background-color: rgba(248, 189, 189, 0.818);",4,"ngIf"],[1,"text-right"],[2,"text-align","center"],["type","button","pButton","","pRipple","","icon","pi pi-pencil",3,"click"],[2,"background-color","rgba(248, 189, 189, 0.818)"],[1,"field"],["for","name"],["required","","autofocus","","type","text","required","",2,"width","100%","height","39px","border-color","lightgray","border-radius","5px",3,"ngModel","ngModelChange","keyup"],["pButton","","pRipple","","label","Cancel","icon","pi pi-times",1,"p-button-text",3,"click"],["pButton","","pRipple","","label","Save","icon","pi pi-check",1,"p-button-text",3,"disabled","click"],[1,"loader"],[1,"overlay"]],template:function(l,r){1&l&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"h2"),e._uU(8),e.qZA()(),e._UZ(9,"hr"),e.TgZ(10,"div",7)(11,"div",8)(12,"address")(13,"strong"),e._uU(14,"Billed To:"),e.qZA(),e._UZ(15,"br"),e.TgZ(16,"strong"),e._uU(17,"Customer Name:"),e.qZA(),e._uU(18),e._UZ(19,"br"),e.TgZ(20,"strong"),e._uU(21,"Mobile Number:"),e.qZA(),e._uU(22),e._UZ(23,"br"),e.TgZ(24,"strong"),e._uU(25,"Address:"),e.qZA(),e._uU(26),e._UZ(27,"br"),e.qZA()(),e.TgZ(28,"div",9)(29,"address")(30,"strong"),e._uU(31,"Billing Date:"),e.qZA(),e._UZ(32,"br"),e._uU(33),e._UZ(34,"br")(35,"br"),e.qZA()()()()(),e.TgZ(36,"div",4)(37,"div",10)(38,"div",11)(39,"div",12)(40,"h3",13)(41,"strong"),e._uU(42,"Purchase summary"),e.qZA()()(),e.TgZ(43,"p-table",14,15),e.YNc(45,Z,22,0,"ng-template",16),e.YNc(46,k,2,2,"ng-template",17),e.qZA()()()()()()()(),e.TgZ(47,"p-dialog",18),e.NdJ("visibleChange",function(s){return r.productDialog=s}),e.YNc(48,A,4,1,"ng-template",19),e.YNc(49,M,2,1,"ng-template",20),e.qZA(),e.YNc(50,S,6,0,"div",21),e.YNc(51,U,1,0,"div",22)),2&l&&(e.xp6(8),e.hij("Billing-Id: ",r.ListData[0].billing_id,""),e.xp6(10),e.Oqu(r.CustomerDtls.name),e.xp6(4),e.Oqu(r.CustomerDtls.mobile_no),e.xp6(4),e.Oqu(r.CustomerDtls.adress),e.xp6(7),e.hij(" ",r.ListData[0].billingdate,""),e.xp6(10),e.Q6J("value",r.ListData),e.xp6(4),e.Akn(e.DdM(12,I)),e.Q6J("visible",r.productDialog)("modal",!0),e.xp6(3),e.Q6J("ngIf",r.spinner),e.xp6(1),e.Q6J("ngIf",r.spinner))},dependencies:[p.O5,m.jx,g.Hq,h.iA,T.V,p.H9],styles:["@media screen and (max-width: 960px){  .customized-timeline .p-timeline-event:nth-child(2n){flex-direction:row!important}  .customized-timeline .p-timeline-event:nth-child(2n) .p-timeline-event-content{text-align:left!important}  .customized-timeline .p-timeline-event-opposite{flex:0}  .customized-timeline .p-card{margin-top:1rem}}"]}),n})(),q=(()=>{var t;class n{}return(t=n).\u0275fac=function(l){return new(l||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[x.Bz.forChild([{path:"",component:O}]),x.Bz]}),n})();var v=a(1180);let z=(()=>{var t;class n{}return t=n,(0,v.Z)(n,"\u0275fac",function(l){return new(l||t)}),(0,v.Z)(n,"\u0275mod",e.oAB({type:t})),(0,v.Z)(n,"\u0275inj",e.cJS({imports:[p.ez,m.m8]})),n})(),Y=(()=>{var t;class n{}return t=n,(0,v.Z)(n,"\u0275fac",function(l){return new(l||t)}),(0,v.Z)(n,"\u0275mod",e.oAB({type:t})),(0,v.Z)(n,"\u0275inj",e.cJS({imports:[p.ez,m.m8]})),n})();var H=a(9920),W=a(7680),$=a(3904);let K=(()=>{var t;class n{}return(t=n).\u0275fac=function(l){return new(l||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({providers:[m.YP],imports:[p.ez,z,g.hJ,Y,q,h.U$,H.K,W.L,$.D,T.S]}),n})()},7680:(b,y,a)=>{a.d(y,{L:()=>e});var p=a(1180),x=a(6814),_=a(4769);let e=(()=>{var f;class u{}return f=u,(0,p.Z)(u,"\u0275fac",function(h){return new(h||f)}),(0,p.Z)(u,"\u0275mod",_.oAB({type:f})),(0,p.Z)(u,"\u0275inj",_.cJS({imports:[x.ez]})),u})()}}]);